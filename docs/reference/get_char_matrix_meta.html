<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Obtains taxa and character metadata from a nexml object — get_char_matrix_meta • rphenoscape</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Obtains taxa and character metadata from a nexml object — get_char_matrix_meta"><meta property="og:description" content="Obtains taxa and character metadata from a nexml object"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rphenoscape</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/rphenoscape.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/phenoscape/rphenoscape/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Obtains taxa and character metadata from a nexml object</h1>
    <small class="dont-index">Source: <a href="https://github.com/phenoscape/rphenoscape/blob/HEAD/R/nexml.R" class="external-link"><code>R/nexml.R</code></a></small>
    <div class="hidden name"><code>get_char_matrix_meta.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Obtains taxa and character metadata from a nexml object</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_char_matrix_meta</span><span class="op">(</span><span class="va">nex</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>nex</dt>
<dd><p>a <a href="https://docs.ropensci.org/RNeXML/reference/nexml-class.html" class="external-link">nexml</a> object</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list of two data frames. The first list item, <code>id_taxa</code>, contains
a data frame with columns label, href (taxon IRI), otu (OTU ID) and otus (OTUs block ID) columns. The second list item,
<code>id_entities</code>, contains a data frame with columns label, href (character ID), and char (character ID in NeXML document).
For nexml objects obtained with <code><a href="get_ontotrace_data.html">get_ontotrace_data()</a></code> the href column will contain the entity term IRI
rather than the character ID, and the char column will contain the entity term ID (the term IRI without the
HTTP path prefix).</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># apply to (synthetic) Ontotrace data matrix</span></span></span>
<span class="r-in"><span><span class="va">nex</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_ontotrace_data.html">get_ontotrace_data</a></span><span class="op">(</span>taxon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ictalurus"</span>, <span class="st">"Ameiurus"</span><span class="op">)</span>, entity <span class="op">=</span> <span class="st">"fin spine"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">get_char_matrix_meta</span><span class="op">(</span><span class="va">nex</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $id_taxa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     label                                       href</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          Ameiurus catus http://purl.obolibrary.org/obo/VTO_0036275</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        Ictalurus pricei http://purl.obolibrary.org/obo/VTO_0036218</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     Ictalurus punctatus http://purl.obolibrary.org/obo/VTO_0036225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   Ameiurus serracanthus http://purl.obolibrary.org/obo/VTO_0036277</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        Ameiurus natalis http://purl.obolibrary.org/obo/VTO_0036274</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      Ictalurus furcatus http://purl.obolibrary.org/obo/VTO_0036223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       Ameiurus brunneus http://purl.obolibrary.org/obo/VTO_0036273</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      Ictalurus balsanus http://purl.obolibrary.org/obo/VTO_0036221</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     Ictalurus mexicanus http://purl.obolibrary.org/obo/VTO_0061498</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        Ictalurus lupus http://purl.obolibrary.org/obo/VTO_0036220</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Ameiurus platycephalus http://purl.obolibrary.org/obo/VTO_0036276</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     Ameiurus nebulosus http://purl.obolibrary.org/obo/VTO_0036278</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13    Ictalurus australis http://purl.obolibrary.org/obo/VTO_0061495</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14         Ameiurus melas http://purl.obolibrary.org/obo/VTO_0036272</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15      Ictalurus dugesii http://purl.obolibrary.org/obo/VTO_0061497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            otu                                  otus</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  VTO_0036275 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  VTO_0036218 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  VTO_0036225 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  VTO_0036277 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  VTO_0036274 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  VTO_0036223 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  VTO_0036273 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  VTO_0036221 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  VTO_0061498 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 VTO_0036220 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 VTO_0036276 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 VTO_0036278 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 VTO_0061495 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 VTO_0036272 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 VTO_0061497 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $id_entities</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                             label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        anterior dentation of pectoral fin spine</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 anterior distal serration of pectoral fin spine</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                            href           char</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 http://purl.obolibrary.org/obo/UBERON_2002001 UBERON_2002001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 http://purl.obolibrary.org/obo/UBERON_2002002 UBERON_2002002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># apply to data matrix from a study</span></span></span>
<span class="r-in"><span><span class="va">slist</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_studies.html">get_studies</a></span><span class="op">(</span>taxon <span class="op">=</span> <span class="st">"Ictalurus australis"</span>, entity <span class="op">=</span> <span class="st">"fin spine"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nex</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_study_data.html">get_study_data</a></span><span class="op">(</span><span class="va">slist</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu">get_char_matrix_meta</span><span class="op">(</span><span class="va">nex</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># for brevity show only first 5 rows</span></span></span>
<span class="r-in"><span><span class="va">metadata</span><span class="op">$</span><span class="va">id_taxa</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,<span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                label                                       href</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     Noturus flavus http://purl.obolibrary.org/obo/VTO_0036263</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    Ictalurus lupus http://purl.obolibrary.org/obo/VTO_0036220</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Noturus insignis http://purl.obolibrary.org/obo/VTO_0036237</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Ameiurus nebulosus http://purl.obolibrary.org/obo/VTO_0036278</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Ictalurus pricei http://purl.obolibrary.org/obo/VTO_0036218</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                        otu</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 otu_3d644586-19a2-49d5-ab3c-673f483c362f</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 otu_7359fcc3-edb3-4ed9-a236-c1e846b8a5f6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 otu_dddcc44c-8c9a-40a7-a7b3-277ce9871593</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 otu_31f42c8a-cd70-4bf4-994d-9bc483822ba7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 otu_da138745-cedf-4cbc-8305-0e602518548c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                        otus</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 otus_623e5db5-d4a5-40b9-b087-e4047cea0e75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 otus_623e5db5-d4a5-40b9-b087-e4047cea0e75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 otus_623e5db5-d4a5-40b9-b087-e4047cea0e75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 otus_623e5db5-d4a5-40b9-b087-e4047cea0e75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 otus_623e5db5-d4a5-40b9-b087-e4047cea0e75</span>
<span class="r-in"><span><span class="va">metadata</span><span class="op">$</span><span class="va">id_entities</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,<span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                           label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Posterior flap of adipose fin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                Gill membranes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                   Orbital rim</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                    Caudal fin</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           Lateral line extent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                   href</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 http://purl.org/phenoscape/uuid/9a83ecb3-e4fc-4232-8144-c90dd8c9f19b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 http://purl.org/phenoscape/uuid/1c9fac46-3ea1-414a-a43b-18a8cbc94371</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 http://purl.org/phenoscape/uuid/9484e795-2f20-459c-9fc0-75118931d621</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 http://purl.org/phenoscape/uuid/89a17565-fb95-4d57-9db6-654724adb470</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 http://purl.org/phenoscape/uuid/9480950e-79ae-4c8e-98f3-4e55663ecf8f</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                             char</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 character_9bd0cd96-aa92-4a07-b735-83be9046467e</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 character_1b7cb4d8-2021-4fe6-a43a-a32d6be9879e</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 character_edea1753-087e-4f7c-8d5d-472fbe2c8f38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 character_9f3e078d-05fd-465f-b137-227d6fb847d9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 character_31d06b95-7175-4c5a-8f92-3de324699507</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Hong Xu, Hilmar Lapp, John Bradley.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

      </footer></div>

  


  

  </body></html>


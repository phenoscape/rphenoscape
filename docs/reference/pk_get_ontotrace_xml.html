<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Obtain a synthetic presence/absence matrix — pk_get_ontotrace_xml • rphenoscape</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Obtain a synthetic presence/absence matrix — pk_get_ontotrace_xml" />
<meta property="og:description" content="Queries the Phenoscape KB for a synthetic presence/absence character matrix
for the given taxa and anatomical entities, and returns the result as a
nexml object (from the RNeXML package)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rphenoscape</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.16</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/rphenoscape.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/phenoscape/rphenoscape/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Obtain a synthetic presence/absence matrix</h1>
    <small class="dont-index">Source: <a href='https://github.com/phenoscape/rphenoscape/blob/master/R/pk_get_xml.R'><code>R/pk_get_xml.R</code></a></small>
    <div class="hidden name"><code>pk_get_ontotrace_xml.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Queries the Phenoscape KB for a synthetic presence/absence character matrix
for the given taxa and anatomical entities, and returns the result as a
<a href='https://docs.ropensci.org/RNeXML/reference/nexml-class.html'>nexml</a> object (from the RNeXML package).</p>
    </div>

    <pre class="usage"><span class='fu'>pk_get_ontotrace_xml</span><span class='op'>(</span><span class='va'>taxon</span>, <span class='va'>entity</span>, relation <span class='op'>=</span> <span class='st'>"part of"</span>,
  variable_only <span class='op'>=</span> <span class='cn'>TRUE</span>, strict <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>taxon</th>
      <td><p>character, required. A vector of taxon names.</p></td>
    </tr>
    <tr>
      <th>entity</th>
      <td><p>character, required.
A single character string or a vector of anatomical class expressions.</p></td>
    </tr>
    <tr>
      <th>relation</th>
      <td><p>character string, optional.
The relationship to the entities to be included in the result. Must be
either "part of" or "develops from", or set to NA to disable.
Default is "part of".</p></td>
    </tr>
    <tr>
      <th>variable_only</th>
      <td><p>logical, optional.
Whether to only include characters that are variable across the selected
set of taxa. Default is TRUE.</p></td>
    </tr>
    <tr>
      <th>strict</th>
      <td><p>logical, optional. Whether or not to treat any failure to resolve
any taxon or entity names to IRI as input error. Resolution by partial or
other inexact match results in a warning, but is not considered a failure.
If FALSE, query execution will continue with the taxon and entity terms
that did resolve to IRI. Default is TRUE, meaning any resolution failure will
result in an error.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><a href='https://docs.ropensci.org/RNeXML/reference/nexml-class.html'>RNeXML::nexml</a> object</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The character matrix includes both asserted and logically inferred states. The
query always includes all subclasses of both taxa and entities, and by default
also includes all parts of the entities. See parameter <code>relation</code> for changing
this. By default, only characters that are variable across the resulting taxa
are included; use <code>variable_only</code> to change this.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># one taxon (including subclasses), one entity (including subclasses and </span>
<span class='co'># by default its parts)</span>
<span class='va'>nex</span> <span class='op'>&lt;-</span> <span class='fu'>pk_get_ontotrace_xml</span><span class='op'>(</span>taxon <span class='op'>=</span> <span class='st'>"Ictalurus"</span>, entity <span class='op'>=</span> <span class='st'>"fin"</span><span class='op'>)</span>

<span class='co'># same as above, except do not include parts or other relationships (fin</span>
<span class='co'># presence/absence does not vary across Ictalurus, hence need to allow</span>
<span class='co'># non-variable characters)</span>
<span class='va'>nex</span> <span class='op'>&lt;-</span> <span class='fu'>pk_get_ontotrace_xml</span><span class='op'>(</span>taxon <span class='op'>=</span> <span class='st'>"Ictalurus"</span>, entity <span class='op'>=</span> <span class='st'>"fin"</span>,
                            relation <span class='op'>=</span> <span class='cn'>NA</span>, variable_only <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># instead of parts, include entities in develops_from relationship to the query entity</span>
<span class='va'>nex</span> <span class='op'>&lt;-</span> <span class='fu'>pk_get_ontotrace_xml</span><span class='op'>(</span>taxon <span class='op'>=</span> <span class='st'>"Ictalurus"</span>, entity <span class='op'>=</span> <span class='st'>"paired fin bud"</span>,
                            relation <span class='op'>=</span> <span class='st'>"develops from"</span>, variable_only <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># query with multiple taxa, and/or multiple entities:</span>
<span class='va'>nex</span> <span class='op'>&lt;-</span> <span class='fu'>pk_get_ontotrace_xml</span><span class='op'>(</span>taxon <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Ictalurus"</span>, <span class='st'>"Ameiurus"</span><span class='op'>)</span>,
                            entity <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"pectoral fin"</span>, <span class='st'>"pelvic fin"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Use the RNeXML API to obtain the character matrix etc:</span>
<span class='va'>m</span> <span class='op'>&lt;-</span> <span class='fu'>RNeXML</span><span class='fu'>::</span><span class='fu'><a href='https://docs.ropensci.org/RNeXML/reference/get_characters.html'>get_characters</a></span><span class='op'>(</span><span class='va'>nex</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span>      <span class='co'># number of taxa and characters</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span> <span class='co'># taxon names</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span> <span class='co'># characters (entity names)</span>

<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Hong Xu, Hilmar Lapp, John Bradley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>



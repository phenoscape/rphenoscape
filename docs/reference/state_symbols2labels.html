<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Translates state symbols to labels in a character matrix — state_symbols2labels • rphenoscape</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Translates state symbols to labels in a character matrix — state_symbols2labels"><meta property="og:description" content="Translates a character matrix using symbols for states to one using labels
instead. The character matrix must have been obtained from a nexml
object, usually using get_char_matrix(), and the nexml object is required
for the translation."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rphenoscape</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/rphenoscape.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/phenoscape/rphenoscape/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Translates state symbols to labels in a character matrix</h1>
    <small class="dont-index">Source: <a href="https://github.com/phenoscape/rphenoscape/blob/HEAD/R/nexml.R" class="external-link"><code>R/nexml.R</code></a></small>
    <div class="hidden name"><code>state_symbols2labels.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Translates a character matrix using symbols for states to one using labels
instead. The character matrix must have been obtained from a <a href="https://docs.ropensci.org/RNeXML/reference/nexml-class.html" class="external-link">nexml</a>
object, usually using <code><a href="get_char_matrix.html">get_char_matrix()</a></code>, and the nexml object is required
for the translation.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">state_symbols2labels</span><span class="op">(</span><span class="va">nex</span>, <span class="va">charmat</span>, metacolumns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>nex</dt>
<dd><p>the <a href="https://docs.ropensci.org/RNeXML/reference/nexml-class.html" class="external-link">nexml</a> object from which the character matrix was obtained</p></dd>


<dt>charmat</dt>
<dd><p>the character matrix (as a data.frame, usually obtained using <code><a href="get_char_matrix.html">get_char_matrix()</a></code>)</p></dd>


<dt>metacolumns</dt>
<dd><p>the indexes of the columns in the matrix that contain metadata (such as taxa,
identifiers, etc), not character states. If not all of these columns are before all character
columns, then the returned matrix will move all of them to the front. The default is the first
two columns.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A data.frame of the character matrix, with cells as state labels instead of symbols, and rows
and columns in the same order as the input matrix (see parameter <code>metacolumns</code> for a possible exception).
The data types of the columns may change as a result of translation, and even if no translation
can take place (due to missing state labels) (although in the absence of translation a numeric
type column should still have a numeric type).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>If state labels are missing for some characters, a warning will be issued.
If the nexml object has no state labels at all, a warning will be issued and
no translation will be attempted. If a symbol cannot be matched to a state
definition in the nexml object, or if the matching state definition does not
give a label for the state, the symbol will not be translated.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>If the nexml object contains multiple character matrices, currently the character labels
must be distinct between them.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># obtain a (synthetic) Ontotrace matrix:</span></span></span>
<span class="r-in"><span><span class="va">nex</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_ontotrace_data.html">get_ontotrace_data</a></span><span class="op">(</span>taxon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ictalurus"</span>, <span class="st">"Ameiurus"</span><span class="op">)</span>, entity <span class="op">=</span> <span class="st">"fin spine"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_char_matrix.html">get_char_matrix</a></span><span class="op">(</span><span class="va">nex</span>, otus_id <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># by default it uses symbols</span></span></span>
<span class="r-in"><span><span class="va">m</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      taxa         otu anterior dentation of pectoral fin spine</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       Ameiurus brunneus VTO_0036273                                        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          Ameiurus catus VTO_0036275                                        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          Ameiurus melas VTO_0036272                                       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        Ameiurus natalis VTO_0036274                                       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      Ameiurus nebulosus VTO_0036278                                        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Ameiurus platycephalus VTO_0036276                                        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   Ameiurus serracanthus VTO_0036277                                        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     Ictalurus australis VTO_0061495                                        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      Ictalurus balsanus VTO_0036221                                        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      Ictalurus dugesii VTO_0061497                                       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     Ictalurus furcatus VTO_0036223                                        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        Ictalurus lupus VTO_0036220                                        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13    Ictalurus mexicanus VTO_0061498                                       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14       Ictalurus pricei VTO_0036218                                        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15    Ictalurus punctatus VTO_0036225                                        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    anterior distal serration of pectoral fin spine</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                                1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                                1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                                          0 and 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                                                1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                                                1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                                                1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                                                1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8                                                1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                                          0 and 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10                                               1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11                                               1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12                                               1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13                                               1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14                                               1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15                                               1</span>
<span class="r-in"><span><span class="co"># translate symbols to labels without having to re-obtain the matrix</span></span></span>
<span class="r-in"><span><span class="fu">state_symbols2labels</span><span class="op">(</span><span class="va">nex</span>, <span class="va">m</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      taxa         otu anterior dentation of pectoral fin spine</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       Ameiurus brunneus VTO_0036273                                  present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          Ameiurus catus VTO_0036275                                  present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          Ameiurus melas VTO_0036272                                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        Ameiurus natalis VTO_0036274                                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      Ameiurus nebulosus VTO_0036278                                  present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Ameiurus platycephalus VTO_0036276                                  present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   Ameiurus serracanthus VTO_0036277                                  present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     Ictalurus australis VTO_0061495                                  present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      Ictalurus balsanus VTO_0036221                                   absent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      Ictalurus dugesii VTO_0061497                                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     Ictalurus furcatus VTO_0036223                                   absent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        Ictalurus lupus VTO_0036220                                  present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13    Ictalurus mexicanus VTO_0061498                                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14       Ictalurus pricei VTO_0036218                                  present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15    Ictalurus punctatus VTO_0036225                                  present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    anterior distal serration of pectoral fin spine</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                          present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                          present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                               present and absent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                                          present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                                          present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                                          present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                                          present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8                                          present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                               present and absent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10                                         present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11                                         present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12                                         present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13                                         present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14                                         present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15                                         present</span>
<span class="r-in"><span><span class="co"># if we obtained the matrix with otus_id, then we have one more metadata column</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_char_matrix.html">get_char_matrix</a></span><span class="op">(</span><span class="va">nex</span>, otus_id <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">state_symbols2labels</span><span class="op">(</span><span class="va">nex</span>, <span class="va">m</span>, metacolumns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      taxa         otu                                  otus</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       Ameiurus brunneus VTO_0036273 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          Ameiurus catus VTO_0036275 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          Ameiurus melas VTO_0036272 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        Ameiurus natalis VTO_0036274 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      Ameiurus nebulosus VTO_0036278 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Ameiurus platycephalus VTO_0036276 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   Ameiurus serracanthus VTO_0036277 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     Ictalurus australis VTO_0061495 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      Ictalurus balsanus VTO_0036221 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      Ictalurus dugesii VTO_0061497 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     Ictalurus furcatus VTO_0036223 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        Ictalurus lupus VTO_0036220 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13    Ictalurus mexicanus VTO_0061498 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14       Ictalurus pricei VTO_0036218 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15    Ictalurus punctatus VTO_0036225 tcb028860-571e-478a-9449-947a521946a1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    anterior dentation of pectoral fin spine</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                   present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                   present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                                      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                                      &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                                   present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                                   present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                                   present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8                                   present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                                    absent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10                                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11                                   absent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12                                  present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13                                     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14                                  present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15                                  present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    anterior distal serration of pectoral fin spine</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                          present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                          present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                               present and absent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                                          present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                                          present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                                          present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                                          present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8                                          present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                               present and absent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10                                         present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11                                         present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12                                         present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13                                         present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14                                         present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15                                         present</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Hong Xu, Hilmar Lapp, John Bradley.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

      </footer></div>

  


  

  </body></html>


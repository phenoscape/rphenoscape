<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Obtains term frequencies for the Phenoscape KB — term_freqs • rphenoscape</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Obtains term frequencies for the Phenoscape KB — term_freqs" />
<meta property="og:description" content="Determines the frequencies for the given input list of terms, based on
the selected corpus." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rphenoscape</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.16</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/rphenoscape.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/phenoscape/rphenoscape/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Obtains term frequencies for the Phenoscape KB</h1>
    <small class="dont-index">Source: <a href='https://github.com/phenoscape/rphenoscape/blob/master/R/term-weights.R'><code>R/term-weights.R</code></a></small>
    <div class="hidden name"><code>term_freqs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Determines the frequencies for the given input list of terms, based on
the selected corpus.</p>
    </div>

    <pre class="usage"><span class='fu'>term_freqs</span><span class='op'>(</span><span class='va'>x</span>, as <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"auto"</span>, <span class='st'>"entity"</span>, <span class='st'>"quality"</span>, <span class='st'>"phenotype"</span><span class='op'>)</span>,
  corpus <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"taxon_annotations"</span>, <span class='st'>"taxa"</span>, <span class='st'>"gene_annotations"</span>, <span class='st'>"genes"</span><span class='op'>)</span>,
  decodeIRI <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a vector or list of one or more terms, either as IRIs or as term
objects.</p></td>
    </tr>
    <tr>
      <th>as</th>
      <td><p>the category or categories of the input terms (see <code><a href='term_category.html'>term_category()</a></code>).
Supported categories are "entity", "quality", and "phenotype". The value
must either be a single category (applying to all terms), or a vector of
categories (of same length as <code>x</code>). If provided as "auto" (or NULL), the
category of each term is automatically determined. The default is "auto".</p></td>
    </tr>
    <tr>
      <th>corpus</th>
      <td><p>the name of the corpus for which to determine frequencies.
Supported values are "taxon_annotations", "taxa", "gene_annotations", and
"genes". (At present, support for "gene_annotations" is pending support in
the Phenoscape API.) The default is "taxon_annotations".</p></td>
    </tr>
    <tr>
      <th>decodeIRI</th>
      <td><p>boolean. If TRUE (the default), attempt to decode
post-composed entity IRIs, and under certain circumstances rewrite the
count query according to the results. At present, this is used only for
entity IRIs detected as "part_of some X" post-compositions, and only for
the "taxon_annotations" corpus. In those cases, the count query will be
rewritten to first query for X, then for X including parts, and the resulting
count is the result of the latter minus that of the former.</p>
<p>The decoding algorithm may be imprecise, so one may want to turn this off,
the result of which will usually be a frequency of zero for those IRIs, due
to limitations in the Phenoscape KB API.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional query parameters to be passed to the function querying
for counts, see <code><a href='pkb_args_to_query.html'>pkb_args_to_query()</a></code>. Currently this is only used for
corpus "taxon_annotations", and the only useful parameter is <code>includeRels</code>,
which can be used to include historical and serial homologues in the counts.
It can also be used to always include parts for entity terms.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a vector of frequencies as floating point numbers (between zero
and 1.0), of the same length (and ordering) as the input list of terms.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Depending on the corpus selected, the frequencies are queried directly
from pre-computed counts through the KB API, or are calculated based on
matching row counts obtained from query results. Currently, the Phenoscape KB
has precomputed counts for corpora "taxa" and "genes". Calculated counts for
the "taxon_annotations" corpus are most reliable for phenotype terms and their
subsumers. For entity terms, subsumers can include many generated
post-composed terms (such as "part_of some X", where X is, for example, an
anatomy term), and at least currently these aren't handled correctly by the
Phenoscape KB, resulting in counts of zero for such terms. For some of these
the implementation here will try to rewrite the query (see parameter
<code>decodeIRI</code>), but this only works to a limited extent.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Term categories being accurate is vital for obtaining correct counts and
thus frequencies. Auto-determining term categories yields reasonably accurate
results, but with caveats. One, it can be time-consuming, and two, especially
for entity terms and their subsumers it is often not 100<!-- % accurate. This -->
function will try to correct for that by assuming that if not all terms
are determined to be of the same category, but one category holds for more
than 90<!-- % of the terms, that it must be the correct category for all terms. -->
If the list of terms is legitimately of different categories, it is best to
determine (and possibly correct) categories beforehand, and then pass the
result as <code>as</code>. If all terms are of the same category and the category is
known beforehand, it saves time and prevents potential errors to supply this
category using <code>as</code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>terms</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"pectoral fin"</span>, <span class='st'>"pelvic fin"</span>, <span class='st'>"dorsal fin"</span>, <span class='st'>"paired fin"</span><span class='op'>)</span>
<span class='va'>IRIs</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>terms</span>, <span class='va'>pk_get_iri</span>, as <span class='op'>=</span> <span class='st'>"anatomy"</span><span class='op'>)</span>
<span class='fu'>term_freqs</span><span class='op'>(</span><span class='va'>IRIs</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 0.001791597 0.002191650 0.004333911 0.004073383</div><div class='input'>
<span class='va'>phens</span> <span class='op'>&lt;-</span> <span class='fu'><a href='get_phenotypes.html'>get_phenotypes</a></span><span class='op'>(</span>entity <span class='op'>=</span> <span class='st'>"basihyal bone"</span><span class='op'>)</span>
<span class='fu'>term_freqs</span><span class='op'>(</span><span class='va'>phens</span><span class='op'>$</span><span class='va'>id</span>, as <span class='op'>=</span> <span class='st'>"phenotype"</span>, corpus <span class='op'>=</span> <span class='st'>"taxon_annotations"</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  [1] 3.951144e-05 4.938930e-06 1.358206e-05 1.123607e-04 6.173663e-06
#&gt;  [6] 2.592938e-05 6.297136e-05 2.210171e-04 2.222519e-04 1.358206e-05
#&gt; [11] 1.358206e-04 4.938930e-06 6.494693e-04 8.890074e-05 2.617633e-04
#&gt; [16] 5.185877e-05 1.852099e-05 1.185343e-04 2.222519e-05 1.024828e-04</div><div class='input'><span class='fu'>term_freqs</span><span class='op'>(</span><span class='va'>phens</span><span class='op'>$</span><span class='va'>id</span>, as <span class='op'>=</span> <span class='st'>"phenotype"</span>, corpus <span class='op'>=</span> <span class='st'>"taxa"</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  [1] 0.002547771 0.000000000 0.002547771 0.002547771 0.001273885 0.001273885
#&gt;  [7] 0.002547771 0.001273885 0.001273885 0.002547771 0.005095541 0.002547771
#&gt; [13] 0.005095541 0.001273885 0.002547771 0.002547771 0.000000000 0.003821656
#&gt; [19] 0.001273885 0.001273885</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Hong Xu, Hilmar Lapp, John Bradley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


